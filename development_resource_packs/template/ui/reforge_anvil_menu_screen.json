{
    "namespace": "reforge_anvil_menu",
    
    "reforge_anvil_menu_content": {
        "type": "panel",
        "size": [ "100%", "100%" ],
        "controls": [
            {
                "background": {
                    "type": "image",
                    "texture": "textures/ui/heavy_anvil_background",
                    "anchor_from": "center",
                    "anchor_to": "center",
                    "alpha": 1,
                    "size": [ 384, 256 ],
                    "visible": true
                }
            },
            {
                "reforge_anvil_menu_form_label@reforge_anvil_menu.reforge_anvil_menu_form_label": {}
            },
            {
                "reforge_anvil_menu_close_button@reforge_anvil_menu.reforge_anvil_menu_close_button": {
                    "offset": [176, -112],
                    "layer": 64
                }
            },
            {
                "reforge_anvil_menu_form_body@reforge_anvil_menu.reforge_anvil_menu_form_body": {}
            },
            {
                "button_panel@reforge_anvil_menu.reforge_anvil_menu_button_panel": {}
            }
        ]
    },

    "reforge_anvil_menu_close_button": {
        "type": "button",
        "default_control": "default",
        "hover_control": "hover",
        "$default_texture|default": "textures/ui/cancel",
        "$hover_texture|default": "textures/ui/cancel",
        "$alpha|default": 1,
        "$size|default": [16, 16],
        "anchor_from": "top_right",
        "anchor_to": "top_right",
        "size": [14, 14],
        "sound_name": "random.click",
        "controls": [
            {
                "default": {
                    "type": "image",
                    "size": "$size",
                    "texture": "$default_texture",
                    "alpha": "$alpha"
                }
            },
            {
                "hover": {
                    "type": "image",
                    "size": "$size",
                    "texture": "$hover_texture",
                    "alpha": "$alpha"
                }
            }
        ],
        "button_mappings": [
            {
                "from_button_id": "button.menu_select",
                "to_button_id": "button.menu_exit",
                "mapping_type": "pressed"
            },
            {
                "from_button_id": "button.menu_ok",
                "to_button_id": "button.menu_exit",
                "mapping_type": "focused"
            }
        ]
    },

    "reforge_anvil_menu_form_body": {
        "visible": false
    },

    "reforge_anvil_menu_form_label": {
        "type": "label",
        "font_type": "default",
        "font_size": "large",
        "anchor_from": "top_middle",
        "anchor_to": "top_middle",
        "text": "#title_text",
        "layer": 8,
        "offset": [0, -120],
        "color": [1, 1, 1],
        "bindings": [
            {
                "binding_name": "#title_text"
            }
        ]
    },

    "reforge_anvil_menu_button_panel": {
        "type": "stack_panel",
        "size": [384, 256],
        "orientation": "horizontal",
        "anchor_from": "center",
        "anchor_to": "center",
        "offset": [40, 32],
        "collection_name": "form_buttons",
        "controls": [
            {
                "left_panel": {
                    "type": "stack_panel",
                    "size": [128, 240],
                    "orientation": "vertical",
                    "collection_name": "form_buttons",
                    "controls": [
                        {
                            "first_button@reforge_anvil_menu.custom_button": {
                                "$button_size": [75, 80],
                                "$padding": [100, 240],
                                "$icon_size": [35, 35],
                                "collection_index": 0
                            }
                        }
                    ]
                }
            },
            {
                "right_panel": {
                    "type": "stack_panel",
                    "size": [200, 220],
                    "orientation": "vertical",
                    "collection_name": "form_buttons",
                    "controls": [
                        {
                            "second_button@reforge_anvil_menu.custom_button": {
                                "$button_size": [200, 220],
                                "$padding": [200, 220],
                                "$icon_size": [0, 0],
                                "collection_index": 1
                            }
                        }
                    ]
                }
            }
        ]
    },

    "custom_button": {
        "$padding|default": [50, 50],
        "$button_size|default": [40, 40],
        "$icon_size|default": [24, 24],

        "$default_button_texture": "textures/ui/heavy_anvil_button_background",
        "$hover_button_texture": "textures/ui/heavy_anvil_button_background_pressed",
        "$pressed_button_texture": "textures/ui/heavy_anvil_button_background_pressed",

        "type": "panel",
        "size": "$padding",
        "controls": [
            {
                "main_ui": {
                    "type": "panel",
                    "size": "$button_size",
                    "controls": [
                        {
                            "panel_name": {
                                "type": "panel",
                                "size": "$button_size",
                                "bindings": [
                                    {
                                        "binding_type": "view",
                                        "source_control_name": "image",
                                        "resolve_sibling_scope": true,
                                        "source_property_name": "(not (#texture = ''))",
                                        "target_property_name": "#visible"
                                    }
                                ],
                                "controls": [
                                    {
                                        "image": {
                                            "type": "image",
                                            "layer": 200,
                                            "size": "$icon_size",
                                            "offset": [0, -15],
                                            "bindings": [
                                                {
                                                    "binding_name": "#form_button_texture",
                                                    "binding_name_override": "#texture",
                                                    "binding_type": "collection",
                                                    "binding_collection_name": "form_buttons"
                                                },
                                                {
                                                    "binding_name": "#form_button_texture_file_system",
                                                    "binding_name_override": "#texture_file_system",
                                                    "binding_type": "collection",
                                                    "binding_collection_name": "form_buttons"
                                                },
                                                {
                                                    "binding_type": "view",
                                                    "source_property_name": "(not ((#texture = '') or (#texture = 'loading')))",
                                                    "target_property_name": "#visible"
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "text": {
                                            "type": "label",
                                            "text": "#form_button_text",
                                            "layer": 32,
                                            "color": [1, 1, 1],
                                            "offset": [0, 10],
                                            "anchor_from": "top_middle",
                                            "anchor_to": "top_middle",
                                            "bindings": [
                                                {
                                                    "binding_name": "#form_button_text",
                                                    "binding_type": "collection",
                                                    "binding_collection_name": "form_buttons"
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            "form_button@common_buttons.light_text_button": {
                                "$pressed_button_name": "button.form_button_click",
                                "anchor_from": "top_left",
                                "anchor_to": "top_left",
                                "size": "$button_size",
                                "$button_text": "#null",
                                "$button_text_binding_type": "collection",
                                "$button_text_grid_collection_name": "form_buttons",
                                "$border_visible": false,
                                "$button_text_max_size": ["100%", 256],
                                "bindings": [
                                    {
                                        "binding_type": "collection_details",
                                        "binding_collection_name": "form_buttons"
                                    }
                                ]
                            }
                        }
                    ]
                }
            }
        ]
    }
}